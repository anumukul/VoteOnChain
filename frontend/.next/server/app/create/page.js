(()=>{var e={};e.id=1572,e.ids=[1572],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},85807:e=>{"use strict";e.exports=require("module")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},14752:e=>{"use strict";e.exports=require("pino-pretty")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},66012:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(34787),s(94435),s(90996);var r=s(30170),a=s(45002),i=s(83876),n=s.n(i),o=s(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,34787)),"/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,94435)),"/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/create/page.tsx"],u="/create/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33397:(e,t,s)=>{Promise.resolve().then(s.bind(s,85729))},85729:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(97247),a=s(28964),i=s(34178),n=s(60781),o=s(81814),l=s(83705),d=s(47139),c=s(24897),u=s(83067),p=s(27757),m=s(58053),x=s(70170),h=s(22394),f=s(25008);let g=a.forwardRef(({className:e,...t},s)=>r.jsx("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));g.displayName="Textarea";var b=s(76156),v=s(64615);let y=(0,s(26323).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var j=s(8749),N=s(41755);let q=[1,2,3],w=[{type:"error",name:"InvalidTimeRange",inputs:[]},{type:"error",name:"InsufficientTokensToCreate",inputs:[]},{type:"error",name:"DescriptionRequired",inputs:[]},{type:"error",name:"InsufficientOptions",inputs:[]},{type:"error",name:"DuplicateOptions",inputs:[]},{type:"error",name:"ProposalAlreadyExists",inputs:[]}],k=[{inputs:[{name:"_value",type:"uint256"}],name:"setValue",outputs:[],stateMutability:"nonpayable",type:"function"}];function C(){let e=(0,i.useRouter)(),t=(0,N.NL)(),{address:s,isConnected:u}=(0,n.m)(),[w,C]=(0,a.useState)(""),[P,V]=(0,a.useState)("1"),[R,O]=(0,a.useState)("3"),[I,E]=(0,a.useState)(q),[S,T]=(0,a.useState)(""),[D,M]=(0,a.useState)(!1),{data:G}=(0,o.u)({address:b.qE.token.address,abi:b.qE.token.abi,functionName:"balanceOf",args:s?[s]:void 0}),{data:Z}=(0,o.u)({address:b.qE.voting.address,abi:b.qE.voting.abi,functionName:"minBalance"}),{writeContract:Y,data:z,isPending:A,error:F}=(0,l.S)(),{isLoading:B}=(0,d.A)({hash:z}),U=u&&void 0!==G&&void 0!==Z&&G>=Z&&w.trim().length>0&&I.length>=2&&Number(P)>=0&&Number(R)>=1,H=e=>{I.length<=2||E(I.filter((t,s)=>s!==e))};if(!u)return r.jsx(p.Zb,{className:"border-dashed",children:(0,r.jsxs)(p.aY,{className:"flex flex-col items-center justify-center py-20 text-center",children:[r.jsx(v.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),r.jsx("p",{className:"text-lg text-muted-foreground mb-2",children:"Connect your wallet"}),r.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"You need to connect a wallet with GOV tokens to create a proposal."})]})});let L=void 0!==G&&void 0!==Z&&G>=Z;return(0,r.jsxs)("div",{className:"space-y-8 animate-fade-in max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create proposal"}),(0,r.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Submit a new governance proposal. You need at least"," ",void 0!==Z?(0,f.LH)(Z):"—"," GOV to create."]}),void 0!==G&&(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Your balance: ",(0,f.LH)(G)," GOV",!L&&r.jsx("span",{className:"text-destructive ml-2",children:"(insufficient)"})]})]}),(0,r.jsxs)(p.Zb,{children:[(0,r.jsxs)(p.Ol,{children:[r.jsx(p.ll,{children:"Proposal details"}),r.jsx(p.SZ,{children:"Describe the proposal and set voting options."})]}),(0,r.jsxs)(p.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"description",children:"Description"}),r.jsx(g,{id:"description",placeholder:"What is this proposal about?",value:w,onChange:e=>C(e.target.value),rows:4,className:"resize-none"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"start",children:"Voting starts in (hours)"}),r.jsx(x.I,{id:"start",type:"number",min:0,placeholder:"0 = start in ~1 min",value:P,onChange:e=>V(e.target.value)}),0===Number(P)&&r.jsx("p",{className:"text-xs text-muted-foreground",children:"Voting will start ~1 minute after creation so the transaction can confirm."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"duration",children:"Duration (days)"}),r.jsx(x.I,{id:"duration",type:"number",min:1,max:30,placeholder:"Min 1 day",value:R,onChange:e=>O(e.target.value)}),1>Number(R)&&""!==R&&r.jsx("p",{className:"text-xs text-destructive",children:"Minimum duration is 1 day"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(h._,{children:"Options (min 2)"}),(0,r.jsxs)(m.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=I.length>0?Math.max(...I)+1:1;E([...I,e])},children:[r.jsx(v.Z,{className:"h-4 w-4 mr-1"}),"Add"]})]}),r.jsx("ul",{className:"space-y-2",children:I.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"w-8 text-muted-foreground font-mono text-sm",children:e}),r.jsx(m.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>H(t),disabled:I.length<=2,className:"shrink-0 text-muted-foreground hover:text-destructive",children:r.jsx(y,{className:"h-4 w-4"})})]},t))})]}),(0,r.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"useTarget",checked:D,onChange:e=>M(e.target.checked),className:"rounded border-input"}),r.jsx(h._,{htmlFor:"useTarget",children:"Execute on MockTargetContract (setValue)"})]}),D&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(h._,{htmlFor:"targetValue",children:"Value to set (uint256)"}),r.jsx(x.I,{id:"targetValue",type:"number",min:0,placeholder:"e.g. 42",value:S,onChange:e=>T(e.target.value)})]})]}),(0,r.jsxs)(m.z,{onClick:()=>{if(!U||!s)return;let r=Math.floor(Date.now()/1e3)+(Number(P)>0?3600*Number(P):60),a=r+86400*Number(R),i=D&&S?b.qE.target.address:"0x0000000000000000000000000000000000000000",n=D&&S?(0,c.R)({abi:k,functionName:"setValue",args:[BigInt(S)]}):"0x";Y({address:b.qE.voting.address,abi:b.qE.voting.abi,functionName:"createProposal",args:[w.trim(),BigInt(r),BigInt(a),I.map(e=>BigInt(e)),i,n,0n,0n,0n],gas:1500000n},{onSuccess:()=>{t.invalidateQueries({queryKey:["readContract"]}),e.push("/proposals")}})},disabled:!U||A||B,className:"w-full",children:[(A||B)&&r.jsx(j.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Create proposal"]}),F&&r.jsx(_,{error:F})]})]})]})}function _({error:e}){let t=e.message,s="";try{let r=e.cause,a=r?.data??e.data;if(a&&"string"==typeof a&&a.startsWith("0x")&&a.length>10){let e=(0,u.p)({abi:w,data:a});t=`Contract reverted: ${e.errorName}`,"InvalidTimeRange"===e.errorName?s="Use “Voting starts in” at least 1 hour, or refresh and try again (we now use at least 1 second in the future).":"InsufficientTokensToCreate"===e.errorName?s="Your GOV balance must be at least 100 GOV (on the token contract on Sepolia).":"DuplicateOptions"===e.errorName?s="Remove duplicate option values so each option is unique.":"InsufficientOptions"===e.errorName&&(s="You need at least 2 options.")}}catch{}return(0,r.jsxs)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-3 text-sm text-destructive",children:[r.jsx("p",{className:"font-medium",children:t}),s&&r.jsx("p",{className:"mt-1 text-destructive/90",children:s})]})}},27757:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>o,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>l});var r=s(97247),a=s(28964),i=s(25008);let n=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent",a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},70170:(e,t,s)=>{"use strict";s.d(t,{I:()=>n});var r=s(97247),a=s(28964),i=s(25008);let n=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Input"},22394:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var r=s(97247),a=s(28964),i=s(71964),n=s(87972),o=s(25008);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},s)=>r.jsx(i.f,{ref:s,className:(0,o.cn)(l(),e),...t}));d.displayName=i.f.displayName},34178:(e,t,s)=>{"use strict";var r=s(25289);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},34787:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(45347).createProxy)(String.raw`/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/create/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4576,2165,7258],()=>s(66012));module.exports=r})();