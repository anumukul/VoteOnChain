(()=>{var e={};e.id=4566,e.ids=[4566],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},85807:e=>{"use strict";e.exports=require("module")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},14752:e=>{"use strict";e.exports=require("pino-pretty")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},70750:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>l}),r(78157),r(94435),r(90996);var t=r(30170),a=r(45002),n=r(83876),i=r.n(n),o=r(66299),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(s,d);let l=["",{children:["proposals",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,78157)),"/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/proposals/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94435)),"/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/proposals/[id]/page.tsx"],u="/proposals/[id]/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/proposals/[id]/page",pathname:"/proposals/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},98319:(e,s,r)=>{Promise.resolve().then(r.bind(r,73730))},73730:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var t=r(97247),a=r(34178),n=r(60781),i=r(81814),o=r(83705),d=r(47139),l=r(27757),c=r(58053),u=r(88964),p=r(76156),x=r(25008),m=r(41755),h=r(8749),g=r(24978),b=r(26323);let f=(0,b.Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),j=(0,b.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var v=r(28964);function N(){let e=(0,a.useParams)().id,{address:s,isConnected:r}=(0,n.m)(),{data:b}=(0,i.u)({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"getProposal",args:[e]}),{data:N}=(0,i.u)({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"getProposalResults",args:[e]}),{data:q}=(0,i.u)({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"getVoterInfo",args:s&&e?[e,s]:void 0}),{data:k}=(0,i.u)({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"getLockedTokens",args:s&&e?[e,s]:void 0}),{data:w}=(0,i.u)({address:p.qE.token.address,abi:p.qE.token.abi,functionName:"balanceOf",args:s?[s]:void 0}),[C,E]=(0,v.useState)(null),{writeContract:P,data:S,isPending:_,error:O}=(0,o.S)(),{isLoading:V}=(0,d.A)({hash:S}),L=(0,m.NL)(),{writeContract:Z,data:A,isPending:Y}=(0,o.S)(),{isLoading:z}=(0,d.A)({hash:A}),{writeContract:D,data:T,isPending:U}=(0,o.S)(),{isLoading:G}=(0,d.A)({hash:T}),{writeContract:M,data:H,isPending:B}=(0,o.S)(),{isLoading:F}=(0,d.A)({hash:H}),I=()=>{L.invalidateQueries({queryKey:["readContract"]})};if(!b)return t.jsx("div",{className:"flex items-center justify-center py-20",children:t.jsx(h.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})});let[R,W,Q,K,X,$,J,ee,es,er,et,ea,en,ei,eo,ed,el]=b,ec=Math.floor(Date.now()/1e3),eu=ec>=Number(K),ep=ec>=Number(X),ex=!!(r&&s&&eu&&!ep&&q&&!q[0]&&void 0!==w&&w>=BigInt(100*1e18)),em=Number(eo),eh=p.So[em]??"Unknown",eg=ep&&!er,eb=er&&3===em&&!ee&&"0x0000000000000000000000000000000000000000"!==et&&ec>Number(X)+Number(en)&&ec<=Number(ei),ef=(2===em||5===em||6===em||3===em&&(ee||ec>Number(ei)))&&void 0!==k&&k>0n;return(0,t.jsxs)("div",{className:"space-y-8 animate-fade-in",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:(0,t.jsxs)("div",{children:[t.jsx(u.C,{variant:1===em?"warning":3===em||4===em?"success":2===em||5===em||6===em?"destructive":"secondary",className:"mb-2",children:eh}),t.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:W||"Untitled proposal"}),(0,t.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Created by ",(0,x.Tg)(Q)]})]})}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{className:"text-base",children:"Details"})}),(0,t.jsxs)(l.aY,{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Start:"})," ",(0,x.p6)(K)]}),(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"End:"})," ",(0,x.p6)(X)]}),(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Total votes:"})," ",(0,x.LH)(es)]}),(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Options:"})," ",J.length]}),er&&N&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Quorum met:"})," ",N[5]?"Yes":"No"]}),(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Threshold met:"})," ",N[4]?"Yes":"No"]}),N[0]&&N[0].length>0&&(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Winner option:"})," ",N[0][0].toString()]})]})]})]}),(0,t.jsxs)(l.Zb,{children:[t.jsx(l.Ol,{children:t.jsx(l.ll,{className:"text-base",children:"Your participation"})}),t.jsx(l.aY,{className:"space-y-2 text-sm",children:r?q?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Voted:"})," ",q[0]?"Yes":"No"]}),q[0]&&(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Option:"})," ",q[2].toString()," \xb7 Weight: ",(0,x.LH)(q[1])]}),void 0!==k&&k>0n&&(0,t.jsxs)("p",{children:[t.jsx("span",{className:"text-muted-foreground",children:"Locked:"})," ",(0,x.LH)(k)," GOV"]})]}):null:t.jsx("p",{className:"text-muted-foreground",children:"Connect wallet to see your status."})})]})]}),(0,t.jsxs)(l.Zb,{children:[(0,t.jsxs)(l.Ol,{children:[t.jsx(l.ll,{className:"text-base",children:"Options & votes"}),t.jsx(l.SZ,{children:er?"Final results":ep?"Voting ended â€” calculate results to see final counts":"Current vote counts"})]}),t.jsx(l.aY,{children:t.jsx("ul",{className:"space-y-3",children:J.map((s,r)=>t.jsx(y,{proposalId:e,option:s,resultVoteCount:N?N[1]?.[r]:void 0,totalVotes:N?N[2]:es,canVote:ex,selectedOption:C,setSelectedOption:E},r))})})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[ex&&(0,t.jsxs)(c.z,{onClick:()=>{null!==C&&e&&P({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"vote",args:[e,C,0n,p.qZ.Balance]},{onSuccess:I})},disabled:null===C||_||V,children:[_||V?t.jsx(h.Z,{className:"h-4 w-4 animate-spin mr-2"}):t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Vote"]}),eg&&(0,t.jsxs)(c.z,{variant:"secondary",onClick:()=>{Z({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"calculateResults",args:[e]},{onSuccess:I})},disabled:Y||z,children:[(Y||z)&&t.jsx(h.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Calculate results"]}),eb&&(0,t.jsxs)(c.z,{onClick:()=>{D({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"executeProposal",args:[e]},{onSuccess:I})},disabled:U||G,children:[U||G?t.jsx(h.Z,{className:"h-4 w-4 animate-spin mr-2"}):t.jsx(f,{className:"h-4 w-4 mr-2"}),"Execute proposal"]}),ef&&(0,t.jsxs)(c.z,{variant:"outline",onClick:()=>{M({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"withdrawLockedTokens",args:[e]},{onSuccess:I})},disabled:B||F,children:[(B||F)&&t.jsx(h.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Withdraw locked tokens"]})]}),O&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-destructive text-sm",children:[t.jsx(j,{className:"h-4 w-4 shrink-0"}),O.message]})]})}function y({proposalId:e,option:s,resultVoteCount:r,totalVotes:a,canVote:n,selectedOption:o,setSelectedOption:d}){let{data:l}=(0,i.u)({address:p.qE.voting.address,abi:p.qE.voting.abi,functionName:"getVoteCount",args:[e,s]}),c=r??l??0n,u=a>0n?Number(10000n*c/a)/100:0;return(0,t.jsxs)("li",{className:`flex items-center justify-between rounded-lg border p-3 ${o===s?"border-primary bg-primary/10":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[n&&t.jsx("button",{type:"button",onClick:()=>d(s),className:"h-4 w-4 rounded-full border-2 border-primary bg-background flex items-center justify-center hover:bg-primary/20",children:o===s&&t.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,t.jsxs)("span",{className:"font-medium",children:["Option ",s.toString()]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"font-mono text-sm",children:[(0,x.LH)(c)," votes"]}),a>0n&&(0,t.jsxs)("span",{className:"text-muted-foreground text-sm ml-2",children:["(",u,"%)"]})]})]})}},88964:(e,s,r)=>{"use strict";r.d(s,{C:()=>o});var t=r(97247);r(28964);var a=r(87972),n=r(25008);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-emerald-500/20 text-emerald-400 border-emerald-500/30",warning:"border-transparent bg-amber-500/20 text-amber-400 border-amber-500/30"}},defaultVariants:{variant:"default"}});function o({className:e,variant:s,...r}){return t.jsx("div",{className:(0,n.cn)(i({variant:s}),e),...r})}},78157:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(45347).createProxy)(String.raw`/Users/anubhavsingh/Desktop/myprojects/VoteOnChain/frontend/app/proposals/[id]/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[9639,209,5878],()=>r(70750));module.exports=t})();