(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1572],{84789:function(e,t,n){Promise.resolve().then(n.bind(n,17385))},17385:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a=n(57437),s=n(2265),i=n(99376),r=n(64707),o=n(27323),u=n(46003),l=n(97269),d=n(17283),c=n(66070),p=n(62869),m=n(94508);let y=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});y.displayName="Input",n(54887);var f=n(85293),b=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=(0,f.Z8)(`Primitive.${t}`),i=s.forwardRef((e,s)=>{let{asChild:i,...r}=e,o=i?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(o,{...r,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{}),x=s.forwardRef((e,t)=>(0,a.jsx)(b.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));x.displayName="Label";let g=(0,n(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),h=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(x,{ref:t,className:(0,m.cn)(g(),n),...s})});h.displayName=x.displayName;let v=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("textarea",{className:(0,m.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...s})});v.displayName="Textarea";var w=n(47170),N=n(26937);let j=(0,n(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var k=n(51817),C=n(29827);let M=[1,2,3],S=[{inputs:[{name:"_value",type:"uint256"}],name:"setValue",outputs:[],stateMutability:"nonpayable",type:"function"}];function D(){let e=(0,i.useRouter)(),t=(0,C.NL)(),{address:n,isConnected:f}=(0,r.m)(),[b,x]=(0,s.useState)(""),[g,D]=(0,s.useState)("1"),[V,P]=(0,s.useState)("3"),[I,R]=(0,s.useState)(M),[T,E]=(0,s.useState)(""),[F,B]=(0,s.useState)(!1),{data:Z}=(0,o.u)({address:w.qE.token.address,abi:w.qE.token.abi,functionName:"balanceOf",args:n?[n]:void 0}),{data:q}=(0,o.u)({address:w.qE.voting.address,abi:w.qE.voting.abi,functionName:"minBalance"}),{writeContract:A,data:L,isPending:O,error:z}=(0,u.S)(),{isLoading:_}=(0,l.A)({hash:L}),Y=f&&void 0!==Z&&void 0!==q&&Z>=q&&b.trim().length>0&&I.length>=2&&Number(g)>=0&&Number(V)>=1,H=e=>{I.length<=2||R(I.filter((t,n)=>n!==e))};if(!f)return(0,a.jsx)(c.Zb,{className:"border-dashed",children:(0,a.jsxs)(c.aY,{className:"flex flex-col items-center justify-center py-20 text-center",children:[(0,a.jsx)(N.Z,{className:"h-16 w-16 text-muted-foreground mb-4"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground mb-2",children:"Connect your wallet"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:"You need to connect a wallet with GOV tokens to create a proposal."})]})});let Q=void 0!==Z&&void 0!==q&&Z>=q;return(0,a.jsxs)("div",{className:"space-y-8 animate-fade-in max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Create proposal"}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-1",children:["Submit a new governance proposal. You need at least"," ",void 0!==q?(0,m.LH)(q):"â€”"," GOV to create."]}),void 0!==Z&&(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Your balance: ",(0,m.LH)(Z)," GOV",!Q&&(0,a.jsx)("span",{className:"text-destructive ml-2",children:"(insufficient)"})]})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Proposal details"}),(0,a.jsx)(c.SZ,{children:"Describe the proposal and set voting options."})]}),(0,a.jsxs)(c.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{htmlFor:"description",children:"Description"}),(0,a.jsx)(v,{id:"description",placeholder:"What is this proposal about?",value:b,onChange:e=>x(e.target.value),rows:4,className:"resize-none"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{htmlFor:"start",children:"Voting starts in (hours)"}),(0,a.jsx)(y,{id:"start",type:"number",min:0,value:g,onChange:e=>D(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{htmlFor:"duration",children:"Duration (days)"}),(0,a.jsx)(y,{id:"duration",type:"number",min:1,max:30,value:V,onChange:e=>P(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(h,{children:"Options (min 2)"}),(0,a.jsxs)(p.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{let e=I.length>0?Math.max(...I)+1:1;R([...I,e])},children:[(0,a.jsx)(N.Z,{className:"h-4 w-4 mr-1"}),"Add"]})]}),(0,a.jsx)("ul",{className:"space-y-2",children:I.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 text-muted-foreground font-mono text-sm",children:e}),(0,a.jsx)(p.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>H(t),disabled:I.length<=2,className:"shrink-0 text-muted-foreground hover:text-destructive",children:(0,a.jsx)(j,{className:"h-4 w-4"})})]},t))})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"useTarget",checked:F,onChange:e=>B(e.target.checked),className:"rounded border-input"}),(0,a.jsx)(h,{htmlFor:"useTarget",children:"Execute on MockTargetContract (setValue)"})]}),F&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h,{htmlFor:"targetValue",children:"Value to set (uint256)"}),(0,a.jsx)(y,{id:"targetValue",type:"number",min:0,placeholder:"e.g. 42",value:T,onChange:e=>E(e.target.value)})]})]}),(0,a.jsxs)(p.z,{onClick:()=>{if(!Y||!n)return;let a=Math.floor(Date.now()/1e3)+3600*Number(g),s=a+86400*Number(V),i=F&&T?w.qE.target.address:"0x0000000000000000000000000000000000000000",r=F&&T?(0,d.R)({abi:S,functionName:"setValue",args:[BigInt(T)]}):"0x";A({address:w.qE.voting.address,abi:w.qE.voting.abi,functionName:"createProposal",args:[b.trim(),BigInt(a),BigInt(s),I.map(e=>BigInt(e)),i,r,0n,0n,0n]},{onSuccess:()=>{t.invalidateQueries({queryKey:["readContract"]}),e.push("/proposals")}})},disabled:!Y||O||_,className:"w-full",children:[(O||_)&&(0,a.jsx)(k.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Create proposal"]}),z&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:z.message})]})]})]})}},62869:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var a=n(57437),s=n(2265),i=n(85293),r=n(90535),o=n(94508);let u=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:n,variant:s,size:r,asChild:l=!1,...d}=e,c=l?i.g7:"button";return(0,a.jsx)(c,{className:(0,o.cn)(u({variant:s,size:r,className:n})),ref:t,...d})});l.displayName="Button"},66070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return r},aY:function(){return d},ll:function(){return u}});var a=n(57437),s=n(2265),i=n(94508);let r=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...s})});r.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",n),...s})});o.displayName="CardHeader";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",n),...s})});u.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});l.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",n),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter"},47170:function(e,t,n){"use strict";n.d(t,{So:function(){return s},qE:function(){return a},qZ:function(){return i}});let a={token:{address:"0xe1267DBA9e3E3749aAF1eFfbC3C4D409f4CbF7Bf",abi:[{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]},voting:{address:"0xF51F3bD4C08b510e704058694AD59B690784055F",abi:[{inputs:[],name:"minBalance",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"defaultQuorum",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"votingToken",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllProposals",outputs:[{name:"",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"offset",type:"uint256"},{name:"limit",type:"uint256"}],name:"getProposalsPaginated",outputs:[{name:"proposals_",type:"bytes32[]"}],stateMutability:"view",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"}],name:"getProposal",outputs:[{name:"id",type:"bytes32"},{name:"description",type:"string"},{name:"creator",type:"address"},{name:"startTime",type:"uint256"},{name:"endTime",type:"uint256"},{name:"snapshotBlock",type:"uint256"},{name:"options",type:"uint256[]"},{name:"executed",type:"bool"},{name:"totalVotes",type:"uint256"},{name:"resultsCalculated",type:"bool"},{name:"target",type:"address"},{name:"data",type:"bytes"},{name:"timeLockDuration",type:"uint256"},{name:"executionDeadline",type:"uint256"},{name:"state",type:"uint8"},{name:"customThreshold",type:"uint256"},{name:"customQuorum",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"}],name:"getProposalResults",outputs:[{name:"winners",type:"uint256[]"},{name:"voteCounts",type:"uint256[]"},{name:"totalVotes",type:"uint256"},{name:"tie",type:"bool"},{name:"noVotes",type:"bool"},{name:"thresholdMet",type:"bool"},{name:"quorumMet",type:"bool"},{name:"calculatedAt",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"},{name:"option",type:"uint256"}],name:"getVoteCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"},{name:"voter",type:"address"}],name:"getVoterInfo",outputs:[{name:"hasVoted",type:"bool"},{name:"weight",type:"uint256"},{name:"votedOption",type:"uint256"},{name:"snapshotPower",type:"uint256"},{name:"delegatedPower",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"},{name:"voter",type:"address"}],name:"getLockedTokens",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"description",type:"string"},{name:"startTime",type:"uint256"},{name:"endTime",type:"uint256"},{name:"options",type:"uint256[]"},{name:"target",type:"address"},{name:"data",type:"bytes"},{name:"timeLockDuration_",type:"uint256"},{name:"customThreshold",type:"uint256"},{name:"customQuorum",type:"uint256"}],name:"createProposal",outputs:[{name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"},{name:"option",type:"uint256"},{name:"weight",type:"uint256"},{name:"powerSource",type:"uint8"}],name:"vote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"}],name:"calculateResults",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"}],name:"executeProposal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"proposalId",type:"bytes32"}],name:"withdrawLockedTokens",outputs:[],stateMutability:"nonpayable",type:"function"}]},target:{address:"0xC799F442F85D4d28DA377342F30C39041b9c102A"}},s=["Pending","Active","Defeated","Succeeded","Executed","Canceled","Expired"],i={Balance:0,Snapshot:1,Delegated:2}},94508:function(e,t,n){"use strict";n.d(t,{LH:function(){return o},Tg:function(){return r},cn:function(){return i},p6:function(){return u}});var a=n(61994),s=n(53335);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,a.W)(t))}function r(e){return!e||e.length<10?e:"".concat(e.slice(0,6),"...").concat(e.slice(-4))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=10n**BigInt(t),a=e/n,s=(e%n).toString().padStart(t,"0").slice(0,4).replace(/0+$/,"");return s?"".concat(a,".").concat(s):a.toString()}function u(e){return new Date(1e3*Number(e)).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}},26937:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let a=(0,n(79205).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])}},function(e){e.O(0,[6440,5383,7632,2971,2117,1744],function(){return e(e.s=84789)}),_N_E=e.O()}]);